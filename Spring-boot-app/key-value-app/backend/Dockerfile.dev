FROM maven:3.9-eclipse-temurin-21

WORKDIR /app

# Copy pom.xml first to prime Maven dependency cache
COPY pom.xml .
RUN mvn dependency:go-offline

# Copy the rest of the project so the container can also run
# without a bind mount if needed
COPY . .

EXPOSE 8080

# Run from source with dev profile and devtools enabled.
# Hot reload works when classes in /app/target/classes change,
# so make sure your IDE or a host Maven build recompiles on save.
CMD ["mvn", "spring-boot:run", "-Dspring-boot.run.profiles=dev", "-Dspring.devtools.restart.enabled=true", "-Dspring.devtools.livereload.enabled=true"]